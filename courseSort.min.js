var Exports={Modules:{}};
Exports.Modules=function(c,g){var e="year=2015",h=window.location.href.split("?")[0];init=function(){openPanels();initFilters()};openPanels=function(){if(0<c(".course-filter").find(".coursebuttonselected").length){var b=c(".coursebuttonselected").parents("div.panel-default");c(b).find("[data-toggle]").attr("data-toggle","no-collapse").removeClass("collapsed");c(b).find(".panel-collapse").addClass("in")}};initFilters=function(){c(".coursebuttonblack").click(function(b){b.preventDefault();c(".coursebuttonselected").toggleClass("coursebutton coursebuttonselected");
c("[data-toggle='no-collapse']").attr("data-toggle","collapse").addClass("collapsed").attr("aria-expanded","false");c(".panel-collapse").removeClass("in").attr("aria-expanded","false");c(".course-filter").each(function(){c(this).hasClass("collapsed")||c(this).addClass("collapsed").attr("aria-expanded","false")});changeURL("");courseCount()});c(".panel-body div").click(function(b){b.preventDefault();c(this).toggleClass("coursebutton coursebuttonselected");buildArray()});c("form[name=course-search]").on("submit",
function(b){c("form[name=course-search]").val("");b.preventDefault();c(this).find("[name=query]");buildArray()});c(".coursedropdown li").click(function(b){b.preventDefault();b=c(this).find("a").attr("href").replace("/content/gallatin/en/academics/courses.html?","").replace(/ /g,"");buildArray(b)})};buildArray=function(b){e=[];c(".coursebuttonselected").find("a").each(function(){var b=[c(this).attr("href").replace("/content/gallatin/en/academics/courses.html?","")];e.push(b)});var f=c("form[name=course-search]").find("[name=query]").val();
""!==f&&(f=("query="+f).replace(" ","+"),e.push(f));b!==g&&e.push(b);e=e.join("&");changeURL(e);callAPI(e)};changeURL=function(c){history.pushState&&history.pushState(null,null,h+"?"+c);return!1};callAPI=function(b){c.getJSON("http://gallatin.nyu.edu/academics/courses/jcr:content/content/search.json?"+b,function(b){var d="",e=b.totalMatches;delete b.totalMatches;c.each(b,function(c,a){null===a["foundation-libarts"]&&(a["foundation-libarts"]="");null===a["foundation-histcult"]&&(a["foundation-histcult"]=
"");null===a.times&&(a.times="");null===a.times2&&(a.times2="");d+="<table><thead><tr><th>"+a.course+"</th><th>Lib Arts<br>"+a["foundation-libarts"]+"</th><th>Hist &amp; Cult<br>"+a["foundation-histcult"]+"<br></th><th>"+a.term+" "+a.year+'</th></tr></thead><tbody><tr><td colspan="4"><h3>'+a.title+"</h3></td></tr><tr><td>"+a.credit+" units</td><td>"+a.days+"<br />"+a.times+"<br />"+a.days2+"<br />"+a.times2+"</td><td>";if(a.instructors!==g){var b=Object.keys(a.instructors[0])[0],e=a.instructors[0][b];
d+='<a href="'+e+'">'+b+"</a>";1<a.instructors&&(b=Object.keys(a.instructors[1])[0],e=a.instructors[1][b],d+='<br /><a href="'+e+'">'+b+"</a>")}d+='</td><td></td></tr><tr><td colspan="4"><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-parent="#accordion" data-toggle="collapse" href="#'+a.course+a.term+a.year+'"></a></h4></div><div class="panel-collapse collapse" id="'+a.course+a.term+a.year+'"><div class="panel-body"><p><strong>Description</strong></p>'+
a.description+"<hr><p><strong>Type</strong></p><p>"+a.type;a.notes&&(d+="<hr><p><strong>Note</strong></p><p>"+a.notes+"</p>");a.syllabus&&(d+='<hr><p><strong>Syllabus</strong></p><p><a href="'+a.syllabus+'">Link</a></p>');d+="</div></div></div></td></tr></tbody></table>"});c(".courseList").html(d);courseCount(e)})};courseCount=function(b){b!==g&&(200>b?c(".showing-courses").text("Found "+b+" courses"):200<b&&c(".showing-courses").text("Found more than 200"))};return{init:init}}(jQuery);$(document).ready(function(){Exports.Modules.init()});
