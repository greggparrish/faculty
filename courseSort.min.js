var Exports={Modules:{}};
Exports.Modules=function(a,d){var c="";init=function(){setVars();initFilters()};setVars=function(){$courseTable=a(".courseList")};initFilters=function(){a(".coursebuttonblack").click(function(b){b.preventDefault();a(".coursebuttonselected").toggleClass("coursebutton coursebuttonselected");a('[data-parent="#accordion"]').each(function(){a(this).hasClass("collapsed")||(a(this).addClass("collapsed"),a(this).attr("aria-expanded","false"),a(".panel-collapse").removeClass("in"),a(".panel-collapse").attr("aria-expanded",
"false"))});changeURL("");courseCount()});a(".coursebutton").click(function(b){b.preventDefault();a(this).toggleClass("coursebutton coursebuttonselected");console.log(buildArray())});a("form[name=course-search]").on("submit",function(b){b.preventDefault();a(this).find("[name=query]");console.log(buildArray())});a(".coursedropdown li").click(function(b){event.preventDefault();b=a(this).find("a").attr("href").replace("/content/gallatin/en/academics/courses.html?","").replace(/ /g,"");console.log(buildArray(b))});
keepOpen=function(b,a){var c=b.parents("div.panel-default").find('[data-toggle="collapse"]').attr("href"),e=c.replace(/\$/g,"");0===a.length?b.parents("div.panel-default").find('[data-toggle="collapse"]').attr("href",e):b.parents("div.panel-default").find('[data-toggle="collapse"]').attr("href",c+"$")}};buildArray=function(b){apiParams=[];a(".coursebuttonselected").find("a").each(function(){var b=[a(this).attr("href").replace("/content/gallatin/en/academics/courses.html?","")];apiParams.push(b)});
var c=a("form[name=course-search]").find("[name=query]").val();""!=c&&(c=("query="+c).replace(" ","+"),apiParams.push(c));b!==d&&apiParams.push(b);apiParams=apiParams.join("&");changeURL(apiParams);callAPI(apiParams);return apiParams};changeURL=function(b){history.pushState&&history.pushState(null,null,"/gallatin?"+b);return!1};callAPI=function(b){a.getJSON("http://gallatin.nyu.edu/academics/courses/jcr:content/content/search.json?"+b).done(function(b){a.each(b.items,function(b,a){c+="<table><thead><tr><th>"+
a.course+"</th><th>Lib Arts<br>"+a["foundation-libarts"]+"</th><th>Hist &amp; Cult<br>"+a["foundation-histcult"]+"<br></th><th>"+a.term+" "+a.year+'</th></tr></thead><tbody><tr><td colspan="4"><h3>'+a.title+"</h3></td></tr><tr><td>"+a.credit+" units</td><td>"+a.days+"<br />"+a.times+"<br />"+a.days2+"<br />"+a.times2+"</td><td>";a.instructors.each(function(a,b){c+='<a href="'+b+'">'+a+"</a>"});c+='</td><td></td></tr><tr><td colspan="4"><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-parent="#accordion" data-toggle="collapse" href="#'+
a.course+a.term+a.year+'"></a></h4></div><div class="panel-collapse collapse" id="'+a.course+a.term+a.year+'"><div class="panel-body"><p><strong>Description</strong></p>'+a.description+"<hr><p><strong>Type</strong></p><p>"+a.type+"</p></div></div></div></td></tr></tbody></table>"});$courseTable.html(c);courseCount(b.items.length)})};courseCount=function(b){b!==d&&a(".showing-courses").text(function(a,c){return c.replace(/\d+/,b)})};return{init:init}}(jQuery);$(document).ready(function(){Exports.Modules.init()});
